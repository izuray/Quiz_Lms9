// 1. Tìm vị trí cột
const headers = Array.from(document.querySelectorAll("table th"));
const loginIndex = headers.findIndex(h => h.innerText.trim() === "Login");
const percentIndex = headers.findIndex(h => h.innerText.trim() === "Percent Solved");

if (loginIndex === -1 || percentIndex === -1) {
    console.error("Không tìm thấy cột cần thiết.");
} else {
    const rows = document.querySelectorAll("table tbody tr");
    let outputText = ""; // Biến chứa toàn bộ nội dung văn bản

    rows.forEach(row => {
        const cells = row.children;
        
        if (cells.length > Math.max(loginIndex, percentIndex)) {
            const login = cells[loginIndex].innerText.trim();
            const percentText = cells[percentIndex].innerText.trim(); 
            
            // Xử lý điểm số
            const percentNumber = parseFloat(percentText.replace('%', '')); 
            
            if (!isNaN(percentNumber)) {
                // Tính thang điểm 10 và làm tròn 1 số thập phân
                let finalScore = Math.round((percentNumber / 10) * 10) / 10;
                
                // Cộng dồn vào chuỗi văn bản (Login + Tab + Điểm + Xuống dòng)
                outputText += `${login}\t${finalScore}\n`;
            }
        }
    });

    // 2. Xuất kết quả
    console.log("--- BẮT ĐẦU COPY TỪ DÒNG DƯỚI ---");
    console.log(outputText);
    console.log("--- HẾT ---");
}
